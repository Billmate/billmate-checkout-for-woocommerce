{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/bco-checkout.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","$","bco_wc","update","checkout_iframe","postMessage","lock","unlock","purchase_complete","hide_overlay","removeClass","unblock","handleEvent","event","origin","json","JSON","parse","data","e","logToFile","getBillmateCheckout","on","bool","bco_wc_params","checkout_flow","shippingZip","shippingCountry","Customer","Shipping","zip","country","addressData","shippingAddress","billingAddress","setBillingAddress","updateNeeded","Billing","billingZip","billingCountry","append","block","message","overlayCSS","background","opacity","ajax","url","iframe_shipping_address_change_url","type","dataType","address","nonce","iframe_shipping_address_change_nonce","success","response","setCustomerData","trigger","error","complete","shippingUpdated","redirectUrl","sessionStorage","getItem","window","location","href","checkout_success_url","checkout_success_nonce","responseJSON","bco_wc_received_url","document","find","height","latestScroll","offset","top","animate","scrollTop","bodyEl","checkoutFormSelector","orderNotesValue","orderNotesSelector","orderNotesEl","paymentMethodEl","paymentMethod","selectAnotherSelector","blocked","extraFieldsSelectorText","extraFieldsSelectorNonText","updateBillmateCheckout","update_checkout_url","update_checkout_nonce","redirect_url","get_checkout_url","get_checkout_nonce","length","prop","submit","billing_address","val","firstname","lastname","company","street","street2","city","phone","email","toUpperCase","shipping_address","hashChange","splittedHash","hash","split","atob","setItem","errorDetected","documentReady","moveExtraCheckoutFields","checkout_layout","addClass","changeFromBCO","preventDefault","bco","change_payment_method_nonce","change_payment_method_url","redirect","maybeChangeToBCO","this","remove","appendTo","form","inArray","standard_woo_checkout_fields","closest","checkIfSelected","filter","log_to_file_url","log_to_file_nonce","init","addEventListener","ready","body"],"mappings":"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","file":"bco-checkout.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","jQuery(function($) {\r\n\tconst bco_wc = {\r\n\r\n\t\tupdate: function() {\r\n\t\t\t/**\r\n\t\t\t * Refresh checkout in iframe\r\n\t\t\t * In this example the name of iframe that contain Billmate Checkout have the name checkout_iframe\r\n\t\t\t */\r\n\t\t\tcheckout_iframe.postMessage('update', '*');\r\n\t\t},\r\n\r\n\t\tlock: function() {\r\n\t\t\t/**\r\n\t\t\t * Lock Billmate checkout from customer interactions\r\n\t\t\t * Will display loading animation and is used when the store is working on the order, for example when cart is updated\r\n\t\t\t */\r\n\t\t\tcheckout_iframe.postMessage('lock', '*');\r\n\t\t},\r\n\r\n\t\tunlock: function() {\r\n\t\t\t/**\r\n\t\t\t * If checkout is locked, remove loading animation and customer can continue to interact with Billmate Checkout\r\n\t\t\t * Is used when store is done with work that affect the order and Billmate Checkout, for example when cart is updated\r\n\t\t\t */\r\n\t\t\tcheckout_iframe.postMessage('unlock', '*');\r\n\t\t},\r\n\r\n\t\tpurchase_complete: function() {\r\n\t\t\t/**\r\n\t\t\t * Post back a reply to the purchase_initialized JS callback. \r\n\t\t\t * WooCommerce order was successfully created, now let Billmate complete the purchase.\r\n\t\t\t * The name of iframe that contain Billmate Checkout have the name checkout_iframe\r\n\t\t\t */\r\n\t\t\tconsole.log('purchase_complete');\r\n\t\t\tcheckout_iframe.postMessage('purchase_complete', '*');\r\n\t\t},\r\n\t\thide_overlay: function() {\r\n\t\t\t/**\r\n\t\t\t * Enable Woocommerce order review when overlay is closed in BCO.\r\n\t\t\t */\r\n\t\t\tconsole.log('hide_overlay');\r\n\t\t\t$('#bco-wrapper').removeClass( 'processing' ).unblock();\r\n\t\t},\r\n\r\n\t\thandleEvent: function(event) {\r\n\t\t\tif(event.origin != \"\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar json = JSON.parse(event.data);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (json.event) {\r\n\t\t\t\t\tcase 'purchase_initialized':\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * When an end user clicks on the \"Purchase button\".\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tconsole.log('billmate_purchase_initialized');\r\n\t\t\t\t\t\tbco_wc.logToFile( 'purchase_initialized from Billmate triggered' );\r\n\t\t\t\t\t\tbco_wc.getBillmateCheckout();\r\n\r\n\t\t\t\t\t\t$( 'body' ).on( 'bco_order_validation', function( event, bool ) {\r\n\t\t\t\t\t\t\tif ( true === bool ) {\r\n\t\t\t\t\t\t\t\t// Success.\r\n\t\t\t\t\t\t\t\tbco_wc.purchase_complete();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'address_selected':\r\n\t\t\t\t\t\tif ( 'checkout' !== bco_wc_params.checkout_flow ) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar shippingZip = '';\r\n\t\t\t\t\t\tvar shippingCountry = '';\r\n\r\n\t\t\t\t\t\t// Check if Shipping address is set.\r\n\t\t\t\t\t\tif ( typeof json.data.Customer.Shipping === 'object' && 'zip' in json.data.Customer.Shipping && '' !== json.data.Customer.Shipping.zip ) {\r\n\t\t\t\t\t\t\t// Set shipping zip and country.\r\n\t\t\t\t\t\t\tshippingZip = json.data.Customer.Shipping.zip;\r\n\t\t\t\t\t\t\tshippingCountry = json.data.Customer.Shipping.country;\r\n\t\t\t\t\t\t\tbco_wc.addressData.shippingAddress = json.data.Customer.Shipping;\r\n\r\n\t\t\t\t\t\t\tbillingAddress = bco_wc.setBillingAddress(json.data);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif ( bco_wc.addressData.shippingZip === shippingZip ) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbco_wc.addressData.updateNeeded = 'yes';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbillingAddress = bco_wc.setBillingAddress(json.data);\r\n\t\t\t\t\t\t\tshippingZip = json.data.Customer.Billing.zip;\r\n\t\t\t\t\t\t\tshippingCountry = json.data.Customer.Billing.country;\r\n\r\n\t\t\t\t\t\t\tif ( bco_wc.addressData.billingZip === billingAddress.billingZip ) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbco_wc.addressData.updateNeeded = 'yes';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbco_wc.addressData.billingZip = billingAddress.billingZip;\r\n\t\t\t\t\t\tbco_wc.addressData.billingCountry = billingAddress.billingCountry;\r\n\t\t\t\t\t\tbco_wc.addressData.shippingZip = shippingZip;\r\n\t\t\t\t\t\tbco_wc.addressData.shippingCountry = shippingCountry;\r\n\r\n\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Customer adress have been set or updated\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t$('#jsLog').append('address_selected<br />');\r\n\r\n\t\t\t\t\t\tif ( 'yes' === bco_wc.addressData.updateNeeded ) {\r\n\t\t\t\t\t\t\t$( '.woocommerce-checkout-review-order-table' ).block({\r\n\t\t\t\t\t\t\t\tmessage: null,\r\n\t\t\t\t\t\t\t\toverlayCSS: {\r\n\t\t\t\t\t\t\t\t\tbackground: '#fff',\r\n\t\t\t\t\t\t\t\t\topacity: 0.6\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$.ajax(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\turl: bco_wc_params.iframe_shipping_address_change_url,\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\taddress: bco_wc.addressData,\r\n\t\t\t\t\t\t\t\t\t\tnonce: bco_wc_params.iframe_shipping_address_change_nonce\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function( response ) {\r\n\t\t\t\t\t\t\t\t\t\tbco_wc.setCustomerData(response.data);\r\n\t\t\t\t\t\t\t\t\t\t// All good trigger update_checkout event.\r\n\t\t\t\t\t\t\t\t\t\t$( 'body' ).trigger( 'update_checkout' );\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log( response );\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\t\t\t\t\tbco_wc.shippingUpdated = true;\r\n\t\t\t\t\t\t\t\t\t\t$( '.woocommerce-checkout-review-order-table' ).unblock();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'payment_method_selected':\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Payment method is selected\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t$('#jsLog').append('payment_method_selected<br />');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'checkout_success':\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Order is paid and customer are not already redirected to accepturl\r\n\t\t\t\t\t\t * Store decideds what to do with order and if redirect customer\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t$('#jsLog').append('checkout_success<br />');\r\n\t\t\t\t\t\tif ( 'checkout' === bco_wc_params.checkout_flow ) {\r\n\t\t\t\t\t\t\tvar redirectUrl = sessionStorage.getItem( 'billmateRedirectUrl' );\r\n\t\t\t\t\t\t\tconsole.log(redirectUrl);\r\n\t\t\t\t\t\t\tif( redirectUrl ) {\r\n\t\t\t\t\t\t\t\twindow.location.href = redirectUrl;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$.ajax(\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\turl: bco_wc_params.checkout_success_url,\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tnonce: bco_wc_params.checkout_success_nonce\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcomplete: function( data ) {\r\n\t\t\t\t\t\t\t\t\t\twindow.location.href = data.responseJSON.data.bco_wc_received_url;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'content_height':\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * The height of checkout, parent can use height to set iframe height when height changes\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t$(document).find('#checkout').height(json.data);\r\n\t\t\t\t\t\t$('#jsLog').append('content_height: ' + json.data + '<br />');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'content_scroll_position':\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * When checkout iframe page is scrolled \r\n\t\t\t\t\t\t * If iframe have same height as Billmate Checkout the store can do the scrolling \r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\twindow.latestScroll = $(document).find( \"#checkout\" ).offset().top + json.data;\r\n\t\t\t\t\t\t$('html, body').animate({scrollTop: $(document).find( \"#checkout\" ).offset().top + json.data}, 400);\r\n\r\n\t\t\t\t\t\t$('#jsLog').append('content_scroll_position: ' + json.data + '<br />');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'checkout_loaded':\r\n\t\t\t\t\t\t$('#jsLog').append('checkout_loaded<br />');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'hide_overlay':\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Overlay is closed.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tbco_wc.hide_overlay();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tbodyEl: $('body'),\r\n\t\tcheckoutFormSelector: 'form.checkout',\r\n\t\tshippingUpdated: false,\r\n\r\n\t\t// Order notes.\r\n\t\torderNotesValue: '',\r\n\t\torderNotesSelector: 'textarea#order_comments',\r\n\t\torderNotesEl: $('textarea#order_comments'),\r\n\r\n\t\t// Payment method.\r\n\t\tpaymentMethodEl: $('input[name=\"payment_method\"]'),\r\n\t\tpaymentMethod: '',\r\n\t\tselectAnotherSelector: '#billmate-checkout-select-other',\r\n\r\n\t\t// Address data.\r\n\t\taddressData: {\r\n\t\t\tbillingAddress: [],\r\n\t\t\tbillingZip: '',\r\n\t\t\tbillingCountry: '',\r\n\t\t\tshippingAddress: [],\r\n\t\t\tshippingZip: '',\r\n\t\t\tshippingCountry: '',\r\n\t\t\tupdateNeeded: 'no'\r\n\t\t},\r\n\r\n\t\t// Extra checkout fields.\r\n\t\tblocked: false,\r\n\t\textraFieldsSelectorText: 'div#bco-extra-checkout-fields input[type=\"text\"], div#bco-extra-checkout-fields input[type=\"password\"], div#bco-extra-checkout-fields textarea, div#bco-extra-checkout-fields input[type=\"email\"], div#bco-extra-checkout-fields input[type=\"tel\"]',\r\n\t\textraFieldsSelectorNonText: 'div#bco-extra-checkout-fields select, div#bco-extra-checkout-fields input[type=\"radio\"], div#bco-extra-checkout-fields input[type=\"checkbox\"], div#bco-extra-checkout-fields input.checkout-date-picker, input#terms input[type=\"checkbox\"]',\r\n\r\n\t\tsetBillingAddress: function(data) {\r\n\t\t\tvar billingZip = '';\r\n\t\t\tvar billingCountry = '';\r\n\r\n\t\t\t// Set billing zip and country.\r\n\t\t\tif ( typeof data.billingAddress === 'object' && 'zip' in data.billingAddress && '' !== data.billingAddress.zip ) { // Set billing zip and country from billingAddress object.\r\n\t\t\t\tbillingZip = data.billingAddress.zip;\r\n\t\t\t\tbillingCountry = data.billingAddress.country;\r\n\t\t\t\tbco_wc.addressData.billingAddress = data.billingAddress;\r\n\t\t\t} else if ( typeof data.Customer.Billing === 'object' && 'zip' in data.Customer.Billing && '' !== data.Customer.Billing.zip ) { // Set billing zip and country from Customer object.\r\n\t\t\t\tbillingZip = data.Customer.Billing.zip;\r\n\t\t\t\tbillingCountry = data.Customer.Billing.country;\r\n\t\t\t\tbco_wc.addressData.billingAddress = data.Customer.Billing;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tbillingZip:billingZip,\r\n\t\t\t\tbillingCountry:billingCountry\r\n\t\t\t   }\r\n\r\n\t\t},\r\n\r\n\t\tupdateBillmateCheckout: function() {\r\n\t\t\t$('.woocommerce-checkout-review-order-table').block({\r\n\t\t\t\tmessage: null,\r\n\t\t\t\toverlayCSS: {\r\n\t\t\t\t\tbackground: '#fff',\r\n\t\t\t\t\topacity: 0.6\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: bco_wc_params.update_checkout_url,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tnonce: bco_wc_params.update_checkout_nonce\r\n\t\t\t\t},\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: function(data) {\r\n\t\t\t\t\tconsole.log(data.responseJSON);\r\n\t\t\t\t\tif (true === data.responseJSON.success) {\r\n\t\t\t\t\t\tbco_wc.update();\r\n\t\t\t\t\t\t// bco_wc.unlock();\r\n\t\t\t\t\t\t$('.woocommerce-checkout-review-order-table').unblock();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('error');\r\n\t\t\t\t\t\tif( '' !== data.responseJSON.data.redirect_url ) {\r\n\t\t\t\t\t\t\tconsole.log('Cart do not need payment. Reloading checkout.');\r\n\t\t\t\t\t\t\twindow.location.href = data.responseJSON.data.redirect_url;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetBillmateCheckout: function() {\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: bco_wc_params.get_checkout_url,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tnonce: bco_wc_params.get_checkout_nonce\r\n\t\t\t\t},\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: function(data) {\r\n\t\t\t\t\tbco_wc.setCustomerData( data.responseJSON.data );\r\n\t\t\t\t\t// Check Terms checkbox, if it exists.\r\n\t\t\t\t\tif ($(\"form.checkout #terms\").length > 0) {\r\n\t\t\t\t\t\t$(\"form.checkout #terms\").prop(\"checked\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$('form.checkout').submit();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsetCustomerData: function( data ) {\r\n\t\t\tif ( data.billing_address !== null ) {\r\n\t\t\t\t// Billing fields.\r\n\t\t\t\t$( '#billing_first_name' ).val( ( ( 'firstname' in data.billing_address ) ? data.billing_address.firstname : '' ) );\r\n\t\t\t\t$( '#billing_last_name' ).val( ( ( 'lastname' in data.billing_address ) ? data.billing_address.lastname : '' ) );\r\n\t\t\t\t$( '#billing_company' ).val( ( ( 'company' in data.billing_address ) ? data.billing_address.company : '' ) );\r\n\t\t\t\t$( '#billing_address_1' ).val( ( ( 'street' in data.billing_address ) ? data.billing_address.street : '' ) );\r\n\t\t\t\t$( '#billing_address_2' ).val( ( ( 'street2' in data.billing_address ) ? data.billing_address.street2 : '' ) );\r\n\t\t\t\t$( '#billing_city' ).val( ( ( 'city' in data.billing_address ) ? data.billing_address.city : '' ) );\r\n\t\t\t\t$( '#billing_postcode' ).val( ( ( 'zip' in data.billing_address ) ? data.billing_address.zip : '' ) );\r\n\t\t\t\t$( '#billing_phone' ).val( ( ( 'phone' in data.billing_address ) ? data.billing_address.phone : '' ) );\r\n\t\t\t\t$( '#billing_email' ).val( ( ( 'email' in data.billing_address ) ? data.billing_address.email : '' ) );\r\n\t\t\t\t$( '#billing_country' ).val( ( ( 'country' in data.billing_address ) ? data.billing_address.country.toUpperCase() : '' ) );\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.shipping_address !== null ) {\r\n\t\t\t\t$( '#ship-to-different-address-checkbox' ).prop( 'checked', true);\r\n\r\n\t\t\t\t// Shipping fields.\r\n\t\t\t\t$( '#shipping_first_name' ).val( ( ( 'firstname' in data.shipping_address ) ? data.shipping_address.firstname : '' ) );\r\n\t\t\t\t$( '#shipping_last_name' ).val( ( ( 'lastname' in data.shipping_address ) ? data.shipping_address.lastname : '' ) );\r\n\t\t\t\t$( '#shipping_company' ).val( ( ( 'company' in data.shipping_address ) ? data.billing_address.company : '' ) );\r\n\t\t\t\t$( '#shipping_address_1' ).val( ( ( 'street' in data.shipping_address ) ? data.shipping_address.street : '' ) );\r\n\t\t\t\t$( '#shipping_address_2' ).val( ( ( 'street2' in data.shipping_address ) ? data.shipping_address.street2 : '' ) );\r\n\t\t\t\t$( '#shipping_city' ).val( ( ( 'city' in data.shipping_address ) ? data.shipping_address.city : '' ) );\r\n\t\t\t\t$( '#shipping_postcode' ).val( ( ( 'zip' in data.shipping_address ) ? data.shipping_address.zip : '' ) );\r\n\t\t\t\t$( '#shipping_country' ).val( ( ( 'country' in data.shipping_address ) ? data.shipping_address.country.toUpperCase() : '' ) );\r\n\t\t\t} else {\r\n\r\n\t\t\t\t$( '#shipping_first_name' ).val( ( ( 'firstname' in data.billing_address ) ? data.billing_address.firstname : '' ) );\r\n\t\t\t\t$( '#shipping_last_name' ).val( ( ( 'lastname' in data.billing_address ) ? data.billing_address.lastname : '' ) );\r\n\t\t\t\t$( '#shipping_company' ).val( ( ( 'company' in data.billing_address ) ? data.billing_address.company : '' ) );\r\n\t\t\t\t$( '#shipping_address_1' ).val( ( ( 'street' in data.billing_address ) ? data.billing_address.street : '' ) );\r\n\t\t\t\t$( '#shipping_address_2' ).val( ( ( 'street2' in data.billing_address ) ? data.billing_address.street2 : '' ) );\r\n\t\t\t\t$( '#shipping_city' ).val( ( ( 'city' in data.billing_address ) ? data.billing_address.city : '' ) );\r\n\t\t\t\t$( '#shipping_postcode' ).val( ( ( 'zip' in data.billing_address ) ? data.billing_address.zip : '' ) );\r\n\t\t\t\t$( '#shipping_country' ).val( ( ( 'country' in data.billing_address ) ? data.billing_address.country.toUpperCase() : '' ) );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thashChange: function() {\r\n\t\t\tconsole.log('hashchange');\r\n\t\t\tvar currentHash = location.hash;\r\n\t\t\tvar splittedHash = currentHash.split(\"=\");\r\n\t\t\tconsole.log(splittedHash[0]);\r\n\t\t\tconsole.log(splittedHash[1]);\r\n\t\t\tif(splittedHash[0] === \"#billmate-success\"){\r\n\t\t\t\tbco_wc.logToFile( 'billmate-success hashtag detected in URL.' );\r\n\t\t\t\t$( 'body' ).trigger( 'bco_order_validation', true );\r\n\t\t\t\tvar response = JSON.parse( atob( splittedHash[1] ) );\r\n\t\t\t\tconsole.log('response.redirect_url');\r\n\t\t\t\tconsole.log(response.redirect_url);\r\n\t\t\t\tsessionStorage.setItem( 'billmateRedirectUrl', response.redirect_url );\r\n\t\t\t\t$('#bco-wrapper').block({\r\n\t\t\t\t\tmessage: null,\r\n\t\t\t\t\toverlayCSS: {\r\n\t\t\t\t\t\tbackground: '#fff',\r\n\t\t\t\t\t\topacity: 0.6\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t$('form.checkout').removeClass( 'processing' ).unblock();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\terrorDetected: function() {\r\n\t\t\t$( 'body' ).trigger( 'bco_order_validation', false );\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t* Document ready function. \r\n\t\t* Runs on the $(document).ready event.\r\n\t\t*/\r\n\t\tdocumentReady: function() {\r\n\t\t\tbco_wc.moveExtraCheckoutFields();\r\n\r\n\t\t\tif ( 'checkout' === bco_wc_params.checkout_flow ) {\r\n\t\t\t\t// Add two column class to checkout if Billmate setting in Woo is set.\r\n\t\t\t\tif ( 'two_column_checkout' === bco_wc_params.checkout_layout ) {\r\n\t\t\t\t\t$('form.checkout.woocommerce-checkout').addClass('bco-two-column-checkout-left');\r\n\t\t\t\t\t$('#bco-iframe').addClass('bco-two-column-checkout-right');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// When \"Change to another payment method\" is clicked.\r\n\t\tchangeFromBCO: function(e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t$(bco_wc.checkoutFormSelector).block({\r\n\t\t\t\tmessage: null,\r\n\t\t\t\toverlayCSS: {\r\n\t\t\t\t\tbackground: '#fff',\r\n\t\t\t\t\topacity: 0.6\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tbco: false,\r\n\t\t\t\t\tnonce: bco_wc_params.change_payment_method_nonce\r\n\t\t\t\t},\r\n\t\t\t\turl: bco_wc_params.change_payment_method_url,\r\n\t\t\t\tsuccess: function (data) {},\r\n\t\t\t\terror: function (data) {},\r\n\t\t\t\tcomplete: function (data) {\r\n\t\t\t\t\twindow.location.href = data.responseJSON.data.redirect;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// When payment method is changed to BCO in regular WC Checkout page.\r\n\t\tmaybeChangeToBCO: function() {\r\n\t\t\tif ( 'bco' === $(this).val() ) {\r\n\r\n\t\t\t\t$(bco_wc.checkoutFormSelector).block({\r\n\t\t\t\t\tmessage: null,\r\n\t\t\t\t\toverlayCSS: {\r\n\t\t\t\t\t\tbackground: '#fff',\r\n\t\t\t\t\t\topacity: 0.6\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$('.woocommerce-info').remove();\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tbco: true,\r\n\t\t\t\t\t\tnonce: bco_wc_params.change_payment_method_nonce\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\turl: bco_wc_params.change_payment_method_url,\r\n\t\t\t\t\tsuccess: function (data) {},\r\n\t\t\t\t\terror: function (data) {},\r\n\t\t\t\t\tcomplete: function (data) {\r\n\t\t\t\t\t\twindow.location.href = data.responseJSON.data.redirect;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Moves all non standard fields to the extra checkout fields.\r\n\t\t*/\r\n\t\tmoveExtraCheckoutFields: function() {\r\n\t\t\t// Move order comments.\r\n\t\t\t$( '.woocommerce-additional-fields' ).appendTo( '#bco-extra-checkout-fields' );\r\n\r\n\t\t\tvar form = $( 'form[name=\"checkout\"] input, form[name=\"checkout\"] select, textarea' );\r\n\t\t\tfor ( i = 0; i < form.length; i++ ) {\r\n\t\t\t\tvar name = form[i].name;\r\n\r\n\t\t\t\t// Check if this is a standard field.\r\n\t\t\t\tif ( -1 === $.inArray( name, bco_wc_params.standard_woo_checkout_fields ) ) {\r\n\r\n\t\t\t\t\t// This is not a standard Woo field, move to our div.\r\n\t\t\t\t\tif ( 0 < $( 'p#' + name + '_field' ).length ) {\r\n\t\t\t\t\t\t$( 'p#' + name + '_field' ).appendTo( '#bco-extra-checkout-fields' );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$( 'input[name=\"' + name + '\"]' ).closest( 'p' ).appendTo( '#bco-extra-checkout-fields' );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t* Check if our gateway is the selected gateway.\r\n\t\t*/\r\n\t\tcheckIfSelected: function() {\r\n\t\t\tif (bco_wc.paymentMethodEl.length > 0) {\r\n\t\t\t\tbco_wc.paymentMethod = bco_wc.paymentMethodEl.filter(':checked').val();\r\n\t\t\t\tif( 'bco' === bco_wc.paymentMethod ) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tlogToFile: function( message ) {\r\n\t\t\t$.ajax(\r\n\t\t\t\t{\r\n\t\t\t\t\turl: bco_wc_params.log_to_file_url,\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmessage: message,\r\n\t\t\t\t\t\tnonce: bco_wc_params.log_to_file_nonce\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tinit: function() {\r\n\t\t\twindow.addEventListener(\"message\", bco_wc.handleEvent);\r\n\t\t\t// Check if Billmate is the selected payment method before we do anything.\r\n\t\t\tif( bco_wc.checkIfSelected() ) {\r\n\t\t\t\t$(document).ready( bco_wc.documentReady() );\r\n\r\n\t\t\t\t// Change from BCO.\r\n\t\t\t\tbco_wc.bodyEl.on('click', bco_wc.selectAnotherSelector, bco_wc.changeFromBCO);\r\n\r\n\t\t\t\tif ( 'checkout' === bco_wc_params.checkout_flow ) {\r\n\t\t\t\t\t// Update Billmate payment.\r\n\t\t\t\t\tbco_wc.bodyEl.on('updated_checkout', bco_wc.updateBillmateCheckout);\r\n\t\t\t\t\t// Lock Billmate on update_checkout.\r\n\t\t\t\t\t// bco_wc.bodyEl.on('update_checkout', bco_wc.lock);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Hashchange.\r\n\t\t\t\t$( window ).on('hashchange', bco_wc.hashChange);\r\n\r\n\t\t\t\t// Error detected.\r\n\t\t\t\t$( document.body ).on( 'checkout_error', bco_wc.errorDetected );\r\n\t\t\t}\r\n\t\t\tbco_wc.bodyEl.on('change', 'input[name=\"payment_method\"]', bco_wc.maybeChangeToBCO);\r\n\t\t\tbco_wc.bodyEl.on( 'click', bco_wc.selectAnotherSelector, bco_wc.changeFromBCO );\r\n\t\t},\r\n\t}\r\n\tbco_wc.init();\r\n});"],"sourceRoot":""}